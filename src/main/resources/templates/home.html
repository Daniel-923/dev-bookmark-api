<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ìŠ¤ë§ˆíŠ¸ ë¶ë§ˆí¬</title>
    <!-- ê°„ë‹¨í•œ ìŠ¤íƒ€ì¼ì„ ì¶”ê°€í•˜ì—¬ ê°€ë…ì„±ì„ ë†’ì…ë‹ˆë‹¤. -->
    <style>
        body { font-family: sans-serif; line-height: 1.6; padding: 20px; max-width: 900px; margin: auto; }
        h1, h2 { border-bottom: 2px solid #eee; padding-bottom: 10px; }
        ul { list-style-type: none; padding-left: 20px; }
        li { margin-top: 5px; }
        .folder-name { font-weight: bold; color: #2c3e50; }
        .bookmark-title { color: #3498db; }
        .bookmark-url { font-size: 0.8em; color: #7f8c8d; margin-left: 10px; }
        .search-form { background-color: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        .search-form input[type="text"] { border: 1px solid #ccc; padding: 8px; border-radius: 4px; margin-right: 10px; }
        .search-form button { background-color: #3498db; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; }
        .search-form button:hover { background-color: #2980b9; }
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        .actions { margin-bottom: 20px; margin-top: 20px; }
        .add-button {
            display: inline-block;
            background-color: #28a745;
            color: white;
            padding: 10px 15px;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
        }
        .add-button:hover { background-color: #218838; }
    </style>
</head>
<body>

<h1>ğŸ“š ë‚´ ë¶ë§ˆí¬</h1>

<!-- "ìƒˆ ë¶ë§ˆí¬ ì¶”ê°€" ë²„íŠ¼ ì¶”ê°€ -->
<div class="actions">
    <a th:href="@{/bookmarks/new}" class="add-button">ìƒˆ ë¶ë§ˆí¬ ì¶”ê°€</a>
</div>

<!-- ê²€ìƒ‰ í¼ ì¶”ê°€ -->
<h2>ğŸ” ë¶ë§ˆí¬ ê²€ìƒ‰</h2>
<form th:action="@{/search}" method="get" class="search-form">
    <label for="keyword">í‚¤ì›Œë“œ:</label>
    <input type="text" id="keyword" name="keyword" placeholder="ì œëª©, ì„¤ëª…ìœ¼ë¡œ ê²€ìƒ‰...">

    <label for="tags">íƒœê·¸:</label>
    <input type="text" id="tags" name="tags" placeholder="ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥...">

    <button type="submit">ê²€ìƒ‰</button>
</form>


<h2>ğŸŒ³ í´ë” íŠ¸ë¦¬</h2>
<!-- 1. ìµœìƒìœ„ í´ë” ëª©ë¡(rootFolders)ì„ ê°€ì§€ê³  ì¬ê·€ í”„ë˜ê·¸ë¨¼íŠ¸ í˜¸ì¶œ ì‹œì‘ -->
<div th:replace="~{home :: folderTree(folders=${rootFolders})}"></div>

<!--
  2. ì¬ê·€ì ìœ¼ë¡œ ì‚¬ìš©ë  í´ë” íŠ¸ë¦¬ í”„ë˜ê·¸ë¨¼íŠ¸ ì •ì˜
     - th:fragment="folderTree": ì´ <div> ë¸”ë¡ì— "folderTree"ë¼ëŠ” ì´ë¦„ì„ ë¶€ì—¬í•©ë‹ˆë‹¤.
     - (folders): ì´ í”„ë˜ê·¸ë¨¼íŠ¸ê°€ 'folders'ë¼ëŠ” ì´ë¦„ì˜ íŒŒë¼ë¯¸í„°(ë°ì´í„°)ë¥¼ ë°›ì„ ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
-->
<div th:fragment="folderTree(folders)">
    <!-- 3. ì „ë‹¬ë°›ì€ folders ëª©ë¡ì´ ë¹„ì–´ìˆì§€ ì•Šì€ ê²½ìš°ì—ë§Œ <ul> íƒœê·¸ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤. -->
    <ul th:if="${folders != null and !folders.isEmpty()}">
        <!-- 4. th:eachë¥¼ ì‚¬ìš©í•˜ì—¬ folders ëª©ë¡ì„ ìˆœíšŒí•©ë‹ˆë‹¤. ê° í´ë”ëŠ” 'folder' ë³€ìˆ˜ì— ë‹´ê¹ë‹ˆë‹¤. -->
        <li th:each="folder : ${folders}">
            <!-- 5. í´ë” ì´ë¦„ ì¶œë ¥ -->
            <div>
                <span class="folder-name" th:text="${folder.name}">ğŸ“ í´ë” ì´ë¦„</span>
            </div>

            <!-- 6. í˜„ì¬ í´ë”ì— ì†í•œ ë¶ë§ˆí¬ ëª©ë¡ì„ ìˆœíšŒí•˜ë©° ì¶œë ¥í•©ë‹ˆë‹¤. -->
            <ul th:if="${folder.bookmarks != null and !folder.bookmarks.isEmpty()}">
                <li th:each="bookmark : ${folder.bookmarks}">
                    <span class="bookmark-title" th:text="${bookmark.title}">ğŸ”– ë¶ë§ˆí¬ ì œëª©</span>
                    <a th:href="${bookmark.url}" th:text="${bookmark.url}" class="bookmark-url" target="_blank">http://example.com</a>
                </li>
            </ul>

            <!-- 7. [í•µì‹¬] í˜„ì¬ í´ë”ì˜ í•˜ìœ„ í´ë” ëª©ë¡(folder.children)ì„ ê°€ì§€ê³ 
                 ìê¸° ìì‹ (folderTree í”„ë˜ê·¸ë¨¼íŠ¸)ì„ ë‹¤ì‹œ í˜¸ì¶œí•©ë‹ˆë‹¤. (ì¬ê·€ í˜¸ì¶œ) -->
            <div th:replace="~{home :: folderTree(folders=${folder.children})}"></div>
        </li>
    </ul>
</div>

</body>
</html>
